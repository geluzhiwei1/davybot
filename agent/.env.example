# Dawei 环境变量配置示例
# 复制此文件为 .env 并根据需要修改配置值

# ============================================================================
# 基础配置
# ============================================================================

# Dawei 主目录，用于存储工作区、日志、配置文件等
# 默认: ~/.dawei
DAWEI_HOME=~/.dawei

# Agent 日志级别
# 可选值: DEBUG, INFO, WARNING, ERROR, CRITICAL
# 默认: WARNING
AGENT_LOG_LEVEL=WARNING


# ============================================================================
# 日志配置 (LOG_ 前缀)
# ============================================================================

# 日志级别
# 默认: WARNING
LOG_LEVEL=WARNING

# 控制台日志级别
# 默认: DEBUG
LOG_CONSOLE_LEVEL=DEBUG

# 文件日志级别
# 默认: DEBUG
LOG_FILE_LEVEL=DEBUG

# 日志目录
# 默认: {DAWEI_HOME}/logs
LOG_LOG_DIR=

# 最大日志文件大小 (MB)
# 默认: 10
LOG_MAX_FILE_SIZE=10

# 日志文件备份数量
# 默认: 5
LOG_BACKUP_COUNT=5

# LLM API HTTP 日志开关 (记录 LLM API 请求/响应)
# 默认: false
LOG_ENABLE_LLM_API_HTTP_LOGGING=false

# 性能日志开关
# 默认: true
LOG_ENABLE_PERFORMANCE_LOGGING=true

# 遥测开关
# 默认: true
LOG_ENABLE_TELEMETRY=true

# 结构化日志开关
# 默认: true
LOG_STRUCTURED_LOGGING=true

# 敏感数据脱敏开关
# 默认: true
LOG_SANITIZE_SENSITIVE_DATA=true


# ============================================================================
# LLM 提供商配置 (LLM_ 前缀)
# ============================================================================

# 默认模型
# 默认: deepseek/deepseek-chat
LLM_DEFAULT_MODEL=deepseek/deepseek-chat

# OpenAI 配置
LLM_OPENAI_API_KEY=
LLM_OPENAI_BASE_URL=https://api.openai.com/v1

# DeepSeek 配置
LLM_DEEPSEEK_API_KEY=
LLM_DEEPSEEK_BASE_URL=https://api.deepseek.com/v1

# Ollama 配置
LLM_OLLAMA_BASE_URL=http://localhost:11434
LLM_OLLAMA_API_KEY=ollama

# LLM 请求超时 (秒)
# 默认: 300
LLM_TIMEOUT=300

# LLM 请求最大重试次数
# 默认: 3
LLM_MAX_RETRIES=3


# ============================================================================
# 熔断器配置 (CIRCUIT_BREAKER_ 前缀)
# ============================================================================

# 失败阈值
# 默认: 5
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# 成功阈值
# 默认: 2
CIRCUIT_BREAKER_SUCCESS_THRESHOLD=2

# 熔断超时 (秒)
# 默认: 60.0
CIRCUIT_BREAKER_TIMEOUT=60.0

# 最大重试次数
# 默认: 5
CIRCUIT_BREAKER_MAX_RETRIES=5


# ============================================================================
# 限流器配置 (RATE_LIMITER_ 前缀)
# ============================================================================

# 初始速率 (请求/秒)
# 默认: 5.0
RATE_LIMITER_INITIAL_RATE=5.0

# 最小速率 (请求/秒)
# 默认: 0.5
RATE_LIMITER_MIN_RATE=0.5

# 最大速率 (请求/秒)
# 默认: 50.0
RATE_LIMITER_MAX_RATE=50.0

# 突发容量
# 默认: 20
RATE_LIMITER_BURST_CAPACITY=20


# ============================================================================
# Agent 配置 (AGENT_ 前缀)
# ============================================================================

# Agent 模式
# 可选值: orchestrator, planner, executor, auto
# 默认: orchestrator
AGENT_MODE=orchestrator

# 是否自动切换模式
# 默认: false
AGENT_ENABLE_AUTO_MODE_SWITCH=false

# 是否启用技能系统
# 默认: true
AGENT_ENABLE_SKILLS=true

# 是否启用 MCP
# 默认: true
AGENT_ENABLE_MCP=true

# 是否自动批准工具
# 默认: true
AGENT_AUTO_APPROVE_TOOLS=true

# 最大并发子任务数
# 默认: 3
AGENT_MAX_CONCURRENT_SUBTASKS=3


# ============================================================================
# Agent 重试配置 (AGENT_RETRY_ 前缀)
# ============================================================================

# 最大重试次数
# 默认: 3
AGENT_RETRY_MAX_RETRIES=3

# 重试延迟 (秒)
# 默认: 1.0
AGENT_RETRY_RETRY_DELAY=1.0

# 退避因子
# 默认: 2.0
AGENT_RETRY_RETRY_BACKOFF_FACTOR=2.0

# 最大延迟 (秒)
# 默认: 60.0
AGENT_RETRY_MAX_DELAY=60.0


# ============================================================================
# Agent 检查点配置 (AGENT_CHECKPOINT_ 前缀)
# ============================================================================

# 检查点间隔 (秒)
# 默认: 300
AGENT_CHECKPOINT_CHECKPOINT_INTERVAL=300

# 最大检查点数
# 默认: 10
AGENT_CHECKPOINT_MAX_CHECKPOINTS=10

# 是否启用压缩
# 默认: true
AGENT_CHECKPOINT_ENABLE_COMPRESSION=true


# ============================================================================
# Agent 超时配置 (AGENT_TIMEOUT_ 前缀)
# ============================================================================

# 工具执行超时 (秒)
# 默认: 60
AGENT_TIMEOUT_TOOL_EXECUTION_TIMEOUT=60

# 请求超时 (秒)
# 默认: 180
AGENT_TIMEOUT_REQUEST_TIMEOUT=180


# ============================================================================
# 记忆系统配置 (MEMORY_ 前缀)
# ============================================================================

# 是否启用记忆系统
# 默认: false
MEMORY_ENABLED=false

# 记忆数据库路径
# 默认: .dawei/memory.db
MEMORY_DB_PATH=.dawei/memory.db

# 虚拟页面大小
# 默认: 2000
MEMORY_VIRTUAL_PAGE_SIZE=2000

# 最大活跃页面数
# 默认: 5
MEMORY_MAX_ACTIVE_PAGES=5


# ============================================================================
# 技能系统配置 (SKILLS_ 前缀)
# ============================================================================

# 是否启用技能系统
# 默认: true
SKILLS_ENABLED=true

# 是否自动发现技能
# 默认: true
SKILLS_AUTO_DISCOVERY=true


# ============================================================================
# 工具系统配置 (TOOL_ 前缀)
# ============================================================================

# 是否启用内置工具
# 默认: true
TOOL_BUILTIN_TOOLS_ENABLED=true

# 是否启用系统工具
# 默认: true
TOOL_SYSTEM_TOOLS_ENABLED=true

# 是否启用用户工具
# 默认: true
TOOL_USER_TOOLS_ENABLED=true

# 是否启用工作区工具
# 默认: true
TOOL_WORKSPACE_TOOLS_ENABLED=true

# 工具默认超时 (秒)
# 默认: 60
TOOL_DEFAULT_TIMEOUT=60

# 最大并发工具执行数
# 默认: 3
TOOL_MAX_CONCURRENT_EXECUTIONS=3


# ============================================================================
# 分析配置 (ANALYTICS_ 前缀)
# ============================================================================

# 是否启用分析
# 默认: true
ANALYTICS_ENABLED=true

# Sentry 错误追踪 DSN
ANALYTICS_SENTRY_DSN=

# Google Analytics 跟踪 ID
ANALYTICS_GA_TRACKING_ID=

# Mixpanel 分析令牌
ANALYTICS_MIXPANEL_TOKEN=

# 数据保留天数
# 默认: 90
ANALYTICS_RETENTION_DAYS=90


# ============================================================================
# 存储配置 (STORAGE_ 前缀)
# ============================================================================

# 存储类型
# 默认: local_filesystem
STORAGE_STORAGE_TYPE=local_filesystem

# 存储根目录
# 默认: .
STORAGE_ROOT_DIR=.

# 是否自动创建存储目录
# 默认: true
STORAGE_CREATE_IF_MISSING=true


# ============================================================================
# 邮件配置 (EMAIL_ / SMTP_ 前缀)
# ============================================================================

# SMTP 服务器地址
SMTP_HOST=smtp.example.com

# SMTP 端口
# 默认: 587
SMTP_PORT=587

# SMTP 用户名
SMTP_USER=

# SMTP 密码
SMTP_PASSWORD=

# 发件人地址
EMAIL_FROM=noreply@example.com

# 收件人地址
EMAIL_TO=admin@example.com


# ============================================================================
# 数据库配置 (DB_ 前缀)
# ============================================================================

# 数据库 URL
# 默认: sqlite:///./data/dawei.db
DB_URL=sqlite:///./data/dawei.db

# 数据库路径
# 默认: ./data/dawei.db
DB_PATH=./data/dawei.db


# ============================================================================
# Redis 配置 (REDIS_ 前缀)
# ============================================================================

# Redis 主机地址
# 默认: localhost
REDIS_HOST=localhost

# Redis 端口
# 默认: 6379
REDIS_PORT=6379

# Redis 密码
REDIS_PASSWORD=

# Redis 数据库索引
# 默认: 0
REDIS_DB=0


# ============================================================================
# 运行时控制
# ============================================================================

# TUI 模式标识 (自动设置，无需手动配置)
DAWEI_TUI_MODE=false

# 超级模式 (⚠️ 谨慎使用，会绕过安全检查)
# 默认: 0 (关闭)
GEWEI_SUPER_MODE=0

# Textual 全屏模式 (TUI 使用)
TEXTUAL_FULLSCREEN=1


# ============================================================================
# 兼容性配置 (直接使用 os.getenv)
# ============================================================================

# LiteLLM API 密钥 (用于转发 OpenAI 请求)
LITELLM_API_KEY=
